{"version":3,"sources":["../../node_modules/antd/es/notification/style/index.js","../../common/helpers/auth.js","components/SignIn/sign-in.component.jsx","components/SignInMaster/sign-in-master.component.jsx"],"names":["getUserMeta","dispatch","a","storage","getStorage","get","ACCESS_TOKEN","getUserMetaAPI","meta","data","companyType","company_type","name","email","username","id","isAdmin","is_admin","companyId","company_id","userId","user_id","userAuthenticated","viewType","type","active","delete","REFRESH_TOKEN","connect","state","user","userMeta","useDispatch","useState","signIn","setSignIn","useForm","form","tailLayout","wrapperCol","offset","span","onFinish","password","getJWTTokens","tokens","access","refresh","window","set","notification","error","message","resetFields","className","labelCol","hideRequiredMark","initialValues","remember","onFinishFailed","errorInfo","Item","label","rules","required","Password","valuePropName","htmlType","align","justify","onClick","navigate","size","style","marginTop","to","SignInMaster","src","alt","zIndex","position","width","height","backgroundPosition","backgroundSize","md","sm","right","top","opacity"],"mappings":"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","file":"static/js/77.2d8ca313.chunk.js","sourcesContent":["import '../../style/default.less';\nimport './index.less';","import { userAuthenticated } from '../actions/signIn';\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from '../constants/storage';\n\nimport { getStorage } from './shared';\n\nimport { getUserMeta as getUserMetaAPI } from '../api/auth';\n\nexport const getUserMeta = async (dispatch) => {\n  const storage = getStorage();\n  if (!(await storage.get(ACCESS_TOKEN, null))) return false;\n\n  try {\n    const { data: meta } = await getUserMetaAPI();\n    if (meta) {\n      const { company_type:companyType, name, email, username, id, is_admin:isAdmin, company_id:companyId, user_id: userId } = meta;\n      dispatch(userAuthenticated({ name, email, username, id, companyType, isAdmin, viewType: companyType[0]||null ,type : 'employee', active:true, companyId, userId }));\n      return false;\n    }\n\n    await storage.delete(ACCESS_TOKEN);\n    await storage.delete(REFRESH_TOKEN);\n  } catch (e) {\n    // ignore error\n  }\n\n  return true;\n};\n","import React, {useState} from 'react';\nimport {Form, Button, Input, Checkbox, notification, Row, Col} from 'antd';\nimport {ACCESS_TOKEN, REFRESH_TOKEN} from 'common/constants/storage';\nimport {getJWTTokens} from 'common/api/auth';\nimport {getUserMeta} from 'common/helpers/auth';\nimport {useDispatch} from 'react-redux';\nimport {connect} from 'react-redux';\nimport {Link, navigate} from '@reach/router';\n\nimport './sign-in.styles.scss';\n\nconst SignIn = ({user}) => {\n  const dispatch = useDispatch();\n  const [signIn, setSignIn] = useState(false);\n\n  const [form] = Form.useForm();\n\n  const layout = {\n    labelCol: {\n      span: 8,\n    },\n    wrapperCol: {\n      span: 8,\n    },\n  };\n  const tailLayout = {\n    wrapperCol: {\n      offset: 9,\n      span: 14,\n    },\n  };\n\n  const onFinish = async ({username, password}) => {\n    try {\n      // setLoading(true);\n      const {data: tokens} = await getJWTTokens({username, password});\n\n      const {access, refresh} = tokens;\n      await window.storage.set(ACCESS_TOKEN, access);\n      await window.storage.set(REFRESH_TOKEN, refresh);\n\n      console.log(access);\n      await getUserMeta(dispatch);\n    } catch (e) {\n      notification.error({\n        message: `Can't Sign In user: ${username} - Invalid Credentials.`,\n      });\n    }\n    form.resetFields();\n  };\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const onSignIn = () => {\n    setSignIn(true);\n  };\n\n  if (signIn) {\n    return (\n      <div className=\"sign-in\">\n        <Form\n          form={form}\n          {...layout}\n          name=\"basic\"\n          hideRequiredMark\n          initialValues={{\n            remember: true,\n          }}\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}>\n          <Form.Item\n            label=\"Username\"\n            name=\"username\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input your username!',\n              },\n            ]}>\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Password\"\n            name=\"password\"\n            rules={[\n              {\n                required: true,\n                message: 'Please input your password!',\n              },\n            ]}>\n            <Input.Password />\n          </Form.Item>\n\n          <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\n            <Checkbox>Remember me</Checkbox>\n          </Form.Item>\n\n          <Form.Item {...tailLayout}>\n            <Button type=\"primary\" htmlType=\"submit\">\n              Submit\n            </Button>\n          </Form.Item>\n        </Form>\n        <Row align=\"middle\" justify=\"center\">\n            <Col span={8}>\n            <Button type=\"link\" onClick={() => {navigate('/forgot-password');}}>\n              Forgot Password?\n            </Button>\n            </Col>\n        </Row>\n      </div>\n    );\n  }\n  return (\n    <div className=\"intro\">\n      <h1>Welcome to the world of organized returnable transport items management</h1>\n      <br />\n      <div className=\"content\">\n        TRAKKIA helps you track and manage returnable transport items in Industrial/Manufacturing supply chains efficiently and effectively. Use Trakkia to reduce asset loss and optimise asset utilisation to boost profitability.\n      </div>\n      <br /> <br />\n      <Button size=\"middle\" type=\"primary\" onClick={() => onSignIn()}>\n        Sign In\n      </Button>\n      <br/>\n      <Button style={{marginTop: \"20px\"}} size=\"middle\" type=\"primary\">\n        <Link to='/sign-up/' >Create Company</Link>\n      </Button>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {user: state.user.userMeta};\n};\n\nexport default connect(mapStateToProps)(SignIn);\n","import React from 'react';\nimport 'antd/dist/antd.css';\nimport { Row, Col, Button } from 'antd';\nimport { Link } from '@reach/router';\nimport SignIn from '../SignIn/sign-in.component';\n\nimport './sign-in-master.styles.scss';\n\nconst SignInMaster = () => (\n  <div className='signInMaster'>\n    <div className='logo'>\n      <img src='home-logo.png' alt='logoimg' style={{ zIndex: '5' }} />\n    </div>\n    <img\n      src='back3.jpg'\n      alt='img'\n      style={{\n        position: 'absolute',\n        width: '100vw',\n        height: '100vh',\n        backgroundPosition: 'center',\n        backgroundSize: 'cover',\n      }}\n    />\n    <br />\n    <br />\n    <Row>\n      <Col md={10} sm={24}>\n        <SignIn />\n      </Col>\n      <Col md={14}>\n        <Button\n          type='primary'\n          style={{\n            position: 'absolute',\n            right: '190px',\n            top: '160px',\n            width: '100px',\n            height: '90px',\n            opacity: '0',\n          }}>\n          <Link to='/sign-up/' />\n        </Button>\n        {/* <Button\n          type='primary'\n          style={{\n            position: 'absolute',\n            right: '150px',\n            top: '160px',\n            width: '10px',\n            height: '90px',\n            opacity: '0',\n          }}>\n          <Link to='/sign-up/employee' />\n        </Button> */}\n      </Col>\n    </Row>\n  </div>\n);\n\nexport default SignInMaster;\n"],"sourceRoot":""}