{"version":3,"sources":["../../common/formFields/createCP/basicDetailsCreateCP.formFields.js","forms/CreateCP/basicDetialsCreateCP.form.js"],"names":["basicDetailCreateCPFormFields","key","kwargs","placeholder","type","FORM_ELEMENT_TYPES","SELECT","customLabel","disabled","INPUT","others","min","BasicDetailsCreateCPForm","id","onCancel","scsData","onNext","active","useState","loading","setLoading","useForm","form","dispatch","useDispatch","state","useSelector","e","data","createCPData","submit","a","ADD_CREATE_CP_DATA","handleFieldsChange","useCallback","name","temp","_","find","sks","i","sender","receiver","value","setFieldsValue","volume_pm","peak_volume","yantra_cycle","total_cycle_time","getFieldValue","kit_pm","ceil","kit_usage_ratio","round","kit_based_on_usage_ratio","parseInt","useEffect","STOP_STEP_LOADING","spinning","initialValues","onFinish","layout","onFieldsChange","autoComplete","orientation","style","justifyContent","slice","map","item","idx","span","toString","className","formItem","showSearch","filterOption","input","option","search","toLowerCase","indexOf","selectOptions","new_id","customTitle","justify","htmlType","onClick","ArrowRightOutlined","fontSize"],"mappings":"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","file":"static/js/82.924498c7.chunk.js","sourcesContent":["import {FORM_ELEMENT_TYPES} from 'web/src/constants/formFields.constant';\r\n\r\nexport const basicDetailCreateCPFormFields = [\r\n  {\r\n    key: 'sender_client',\r\n    kwargs: {\r\n      placeholder: 'Sender',\r\n    },\r\n    type: FORM_ELEMENT_TYPES.SELECT,\r\n    customLabel: 'Sender',\r\n  },\r\n\r\n  {\r\n    key: 'sender_location',\r\n    kwargs: {\r\n      placeholder: 'Emitter Location',\r\n      disabled: true,\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    customLabel: 'Emitter Location',\r\n  },\r\n  {\r\n    key: 'receiver',\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    kwargs: {\r\n      placeholder: 'Receiver',\r\n      disabled: true,\r\n    },\r\n    customLabel: 'Receiver',\r\n  },\r\n  {\r\n    key: 'receiver_location',\r\n    kwargs: {\r\n      placeholder: 'Receiver Location',\r\n      disabled: true,\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    customLabel: 'Receiver Location',\r\n  },\r\n  {\r\n    key: 'part_name',\r\n    kwargs: {\r\n      placeholder: 'Part Name',\r\n      disabled: true,\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Part Name',\r\n  },\r\n  //parts_pm\r\n  // {\r\n  //   key: 'component_perkit',\r\n  //   kwargs: {\r\n  //     placeholder: 'Component/Kit',\r\n  //     type:'number',\r\n  //   },\r\n  //   type: FORM_ELEMENT_TYPES.INPUT,\r\n  //   others: null,\r\n  //   customLabel: 'Component/Kit',\r\n  // },\r\n  //weight\r\n  {\r\n    key: 'total_comp_weight_perkit',\r\n    kwargs: {\r\n      placeholder: 'Total Component Weight/Kit',\r\n      type: 'number',\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Total Component Weight/Kit',\r\n  },\r\n\r\n  {\r\n    key: 'volume_pm',\r\n    kwargs: {\r\n      placeholder: 'Total Component/Month',\r\n      disabled: true,\r\n      type: 'number',\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Total Component/Month',\r\n  },\r\n  {\r\n    // key: 'total_component_per_kit',\r\n    key: 'component_perkit',\r\n    kwargs: {\r\n      placeholder: 'Total Component/Kit',\r\n      type: 'number',\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Total Component/Kit',\r\n  },\r\n\r\n  {\r\n    key: 'kit_pm',\r\n    kwargs: {\r\n      placeholder: 'Total Kit/Month',\r\n      type: 'number',\r\n      disabled: true,\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Total Kit/Month',\r\n  },\r\n  {\r\n    key: 'yantra_cycle',\r\n    kwargs: {\r\n      placeholder: 'Yantra Cycle Time',\r\n      type: 'number',\r\n      disabled: true,\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Yantra Cycle Time',\r\n  },\r\n  {\r\n    key: 'buffer',\r\n    kwargs: {\r\n      placeholder: 'Buffer',\r\n      type: 'number',\r\n      min: 0,\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Buffer (%)',\r\n  },\r\n  {\r\n    key: 'kit_usage_ratio',\r\n    kwargs: {\r\n      placeholder: 'Kit Usage Ratio',\r\n      type: 'number',\r\n      disabled: true,\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Kit Usage Ratio',\r\n  },\r\n  {\r\n    key: 'kit_based_on_usage_ratio',\r\n    kwargs: {\r\n      placeholder: 'Number of Kit based on Usage Ratio',\r\n      type: 'number',\r\n      disabled: true,\r\n    },\r\n    type: FORM_ELEMENT_TYPES.INPUT,\r\n    others: null,\r\n    customLabel: 'Number of Kit based on Usage Ratio',\r\n  },\r\n];\r\n","import React, {useEffect, useState, useCallback} from 'react';\r\nimport {Form, Col, Row, Button, Divider, Spin} from 'antd';\r\nimport {ArrowRightOutlined} from '@ant-design/icons';\r\nimport formItem from 'hocs/formItem.hoc';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {ADD_CREATE_CP_DATA, STOP_STEP_LOADING} from 'common/actions';\r\nimport {basicDetailCreateCPFormFields} from 'common/formFields/createCP/basicDetailsCreateCP.formFields';\r\n\r\nimport _ from 'lodash';\r\n\r\nexport const BasicDetailsCreateCPForm = ({id, onCancel, scsData, onNext, active}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [form] = Form.useForm();\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((e) => e.data.createCPData);\r\n\r\n  const submit = async (data) => {\r\n    setLoading(true);\r\n    await dispatch({type: ADD_CREATE_CP_DATA, data: {...data}});\r\n    setLoading(false);\r\n    if (active === 0) {\r\n      onNext();\r\n    }\r\n  };\r\n\r\n  const handleFieldsChange = useCallback(\r\n    (data) => {\r\n      if (data[0]) {\r\n        if (data[0].name) {\r\n          const currentInputField = data[0].name[0];\r\n          console.log(currentInputField);\r\n\r\n          if (currentInputField === 'sender_client') {\r\n            const temp = _.find(\r\n              scsData.sks,\r\n              (i) => `${i.sender} - ${i.receiver}` === data[0].value,\r\n            );\r\n            form.setFieldsValue({\r\n              volume_pm: temp.peak_volume,\r\n              yantra_cycle: temp.total_cycle_time,\r\n            });\r\n          }\r\n\r\n          if (form.getFieldValue('volume_pm') && form.getFieldValue('component_perkit')) {\r\n            form.setFieldsValue({\r\n              kit_pm: _.ceil(\r\n                form.getFieldValue('volume_pm') / form.getFieldValue('component_perkit'),\r\n              ),\r\n            });\r\n          } else {\r\n            form.setFieldsValue({\r\n              kit_pm: 0,\r\n            });\r\n          }\r\n\r\n          if (form.getFieldValue('yantra_cycle')) {\r\n            form.setFieldsValue({\r\n              kit_usage_ratio: _.round(30 / form.getFieldValue('yantra_cycle'), 2),\r\n            });\r\n          } else {\r\n            form.setFieldsValue({\r\n              kit_usage_ratio: 0,\r\n            });\r\n          }\r\n\r\n          if (\r\n            form.getFieldValue('kit_pm') &&\r\n            form.getFieldValue('kit_usage_ratio') &&\r\n            form.getFieldValue('buffer')\r\n          ) {\r\n            form.setFieldsValue({\r\n              kit_based_on_usage_ratio: _.ceil(\r\n                (form.getFieldValue('kit_pm') / form.getFieldValue('kit_usage_ratio')) *\r\n                  (1 + parseInt(form.getFieldValue('buffer')) / 100),\r\n              ),\r\n            });\r\n          } else {\r\n            form.setFieldsValue({\r\n              kit_based_on_usage_ratio: 0,\r\n            });\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [form, scsData],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (active !== 0) {\r\n      form.submit();\r\n      dispatch({type: STOP_STEP_LOADING});\r\n    }\r\n  }, [active]);\r\n\r\n  return (\r\n    <Spin spinning={loading}>\r\n      <Form\r\n        initialValues={{...state}}\r\n        onFinish={submit}\r\n        form={form}\r\n        layout=\"vertical\"\r\n        onFieldsChange={handleFieldsChange}\r\n        // hideRequiredMark\r\n        autoComplete=\"off\">\r\n        <Divider orientation=\"left\">Basic Details</Divider>\r\n        <Row style={{justifyContent: 'left'}}>\r\n          {basicDetailCreateCPFormFields.slice(0, 1).map((item, idx) => (\r\n            <Col span={24}>\r\n              <div key={idx.toString()} className=\"p-2\">\r\n                {formItem({\r\n                  ...item,\r\n                  customLabel: 'Sender - Receiver',\r\n                  kwargs: {\r\n                    ...item.kwargs,\r\n                    showSearch: true,\r\n                    filterOption: (input, option) =>\r\n                      option.search.toLowerCase().indexOf(input.toLowerCase()) >= 0,\r\n                  },\r\n                  others: {\r\n                    selectOptions: scsData.sks\r\n                      ? scsData.sks.map((i) => ({...i, new_id: `${i.sender} - ${i.receiver}`}))\r\n                      : [],\r\n                    key: 'new_id',\r\n                    customTitle: 'new_id',\r\n                  },\r\n                })}\r\n              </div>\r\n            </Col>\r\n          ))}\r\n          {/* {basicDetailCreateCPFormFields.slice(2, 3).map((item, idx) => (\r\n            <Col span={12}>\r\n              <div key={idx.toString()} className=\"p-2\">\r\n                {formItem(item)}\r\n              </div>\r\n            </Col>\r\n          ))} */}\r\n        </Row>\r\n        <Divider orientation=\"left\">Part Details</Divider>\r\n        <Row style={{justifyContent: 'left'}}>\r\n          {basicDetailCreateCPFormFields.slice(4, 14).map((item, idx) => (\r\n            <Col span={6}>\r\n              <div key={idx.toString()} className=\"p-2\">\r\n                {formItem(item)}\r\n              </div>\r\n            </Col>\r\n          ))}\r\n        </Row>\r\n        <Row justify=\"space-between\">\r\n          <div className=\"row\">\r\n            <Button type=\"primary\" htmlType=\"submit\" disabled>\r\n              Submit\r\n            </Button>\r\n            <div className=\"p-2\" />\r\n            <Button type=\"primary\" onClick={onCancel}>\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n          <Button type=\"link\" htmlType=\"submit\">\r\n            <ArrowRightOutlined style={{fontSize: 30}} />\r\n          </Button>\r\n        </Row>\r\n      </Form>\r\n    </Spin>\r\n  );\r\n};\r\n\r\nexport default BasicDetailsCreateCPForm;\r\n"],"sourceRoot":""}